<?php extend('extend/extend'); ?>
<?php start('style');?>
<style type="text/css">
    .ui.popup{
        padding: .3em .5em;
    }
</style>
<?php stop();?>
<?php start('content'); ?>
<!--内容-->
<h3 class="ui top attached header">
    <i class="grid layout icon"></i> 栏目管理
</h3>
<div class="ui attached segment">
    <a class="ui blue basic button" href="/column-setting/add">
        <i class="tiny plus icon"></i> 添加
    </a>
    <a class="ui red basic button" href="/column-setting/add">
        <i class="tiny remove icon"></i> 批量删除
    </a>
    <table class="ui blue unstackable selectable celled table">
        <thead>
            <tr>
                <th>ID</th>
                <th>栏目</th>
                <th>别名</th>
                <th>文章数</th>
                <th>是否启用</th>
                <th>简介</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <?php if (empty($pageData)): ?>
                <tr class="terse center">
                    <td colspan="8">暂时没有任何栏目</td>
                </tr>
            <?php endif ?>
            <?php foreach ($pageData as $key => $val) { ?>
            <tr>
                <td class="collapsing"><?=$key?></td>
                <td><?=$val['name']?></td>
                <td><?=$val['nickname']?></td>
                <td><a href="/article-setting/search.html?column=<?=$key?>"><?=$val['articles']?> 篇</a></td>
                <td>
                    <span class="ui toggle checkbox">
                        <?php if ($val['is_show']): ?>
                        <input type="checkbox" name="public" checked="checked" data-id="<?=$key?>">
                        <label></label>
                        <?php else: ?>
                        <input type="checkbox" name="public" data-id="<?=$key?>">
                        <label></label>
                        <?php endif ?>
                    </span>
                </td>
                <td class="break"><?=$val['description']?></td>
                <td style="font-size: 12px;">
                    <i class="circular blue write icon link" data-content="编辑" data-position="bottom center" data-variation="inverted" data-action="/column-setting/edit?id=<?=$key?>"></i>
                    <i class="circular red trash outline icon link" data-content="删除" data-position="bottom center" data-variation="inverted" data-action="/column-setting/doDelete?id=<?=$key?>"></i>
                </td>
            </tr>
            <?php }?>
        </tbody>
    </table>
</div>
<div class="terse tip">
    <span style="margin: 0 5px;">这是一个小提示！</span>
    <i class="remove icon" style="margin-right: -10px;"></i>
</div>
<?php stop(); ?>
<?php start('script'); ?>
<script type="text/javascript">
$(document).ready(function(){
    <?php if (!empty($msg)): ?>
    showTips("<?=$msg?>");
    <?php endif ?>
    //开启提示框
    $('.icon.link').popup({
        inline: true
    });

    //编辑
    $('.write.link').click(function(){
        var href = $(this).attr('data-action');
        window.open(href,'_self');
    });

    //删除
    $('.trash.link').click(function(){
        var href = $(this).attr('data-action');
        window.open(href,'_self');
    });

});
</script>
<?php stop(); ?>
